<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n tr·ªã H·ªá th·ªëng - Smart Parking</title>

    <!-- Fonts & Libraries -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Th∆∞ vi·ªán JS b√™n th·ª© ba -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.min.js" defer></script>

    <!-- Config & CSS -->
    <link rel="stylesheet" href="admin.css">
    <script src="config.js" defer></script>

</head>

<body>
    <!-- ================================================================= -->
    <!-- M√ÄN H√åNH ƒêƒÇNG NH·∫¨P (PREMIUM DESIGN) -->
    <!-- ================================================================= -->
    <div id="login-screen">
        <div class="login-card glass-panel">
            <div class="login-header">
                <img src="https://cdn.haitrieu.com/wp-content/uploads/2021/11/Logo-Doan-Thanh-NIen-Cong-San-Ho-Chi-Minh-1.png"
                    alt="Logo" class="login-logo">
                <h2>Qu·∫£n tr·ªã H·ªá th·ªëng</h2>
                <p>ƒêƒÉng nh·∫≠p ƒë·ªÉ truy c·∫≠p b·∫£ng ƒëi·ªÅu khi·ªÉn</p>
            </div>
            <form id="login-form">
                <div class="form-group floating-label">
                    <input type="email" id="login-email" required placeholder=" " autocomplete="email">
                    <label for="login-email">Email qu·∫£n tr·ªã</label>
                </div>
                <div class="form-group floating-label">
                    <input type="password" id="login-password" required placeholder=" " autocomplete="current-password">
                    <label for="login-password">M·∫≠t kh·∫©u</label>
                </div>
                <p id="login-error-message"></p>
                <button type="submit" class="action-button btn-primary btn-lg btn-glow">
                    <span>ƒêƒÉng nh·∫≠p ngay</span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M5 12h14" />
                        <path d="m12 5 7 7-7 7" />
                    </svg>
                </button>
            </form>
        </div>
        <div class="login-bg-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
        </div>
    </div>

    <!-- ================================================================= -->
    <!-- N·ªòI DUNG CH√çNH (DASHBOARD LAYOUT) -->
    <!-- ================================================================= -->
    <!-- L·ªöP PH·ª¶ T·∫¢I D·ªÆ LI·ªÜU -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-content">
            <div class="spinner-box">
                <div class="three-quarter-spinner"></div>
            </div>
            <p>ƒêang ƒë·ªìng b·ªô d·ªØ li·ªáu...</p>
        </div>
    </div>

    <div id="main-admin-content" class="main-admin-container" style="display: none;">
        <!-- SIDEBAR NAVIGATION -->
        <aside class="sidebar glass-sidebar">
            <div class="sidebar-header">
                <div class="logo-wrapper">
                    <img src="https://cdn.haitrieu.com/wp-content/uploads/2021/11/Logo-Doan-Thanh-NIen-Cong-San-Ho-Chi-Minh-1.png"
                        alt="Logo">
                </div>
                <div class="brand-text">
                    <h3>Smart Admin</h3>
                    <span>Parking System</span>
                </div>
            </div>

            <nav class="nav-menu custom-scrollbar">
                <ul>
                    <li class="nav-category">T·ªîNG QUAN</li>
                    <li>
                        <a href="#" class="nav-link active" data-target="page-dashboard">
                            <div class="nav-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="3" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="14" width="7" height="7"></rect>
                                    <rect x="3" y="14" width="7" height="7"></rect>
                                </svg></div>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="index.html" class="nav-link go-home">
                            <div class="nav-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
                                    <polyline points="9 22 9 12 15 12 15 22" />
                                </svg></div>
                            <span>V·ªÅ trang ch·ªß</span>
                        </a>
                    </li>

                    <li class="nav-category">QU·∫¢N L√ù</li>
                    <li>
                        <a href="#" class="nav-link" data-target="page-transactions">
                            <div class="nav-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                    <polyline points="14 2 14 8 20 8" />
                                    <line x1="16" y1="13" x2="8" y2="13" />
                                    <line x1="16" y1="17" x2="8" y2="17" />
                                    <polyline points="10 9 9 9 8 9" />
                                </svg></div>
                            <span>Giao d·ªãch</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-target="page-locations">
                            <div class="nav-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" />
                                    <circle cx="12" cy="10" r="3" />
                                </svg></div>
                            <span>B√£i ƒë·ªó xe</span>
                        </a>
                    </li>

                    <li class="nav-category">H·ªÜ TH·ªêNG</li>
                    <li>
                        <a href="#" class="nav-link" data-target="page-security">
                            <div class="nav-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                                </svg></div>
                            <span>An ninh</span>
                        </a>
                    </li>

                    <li>
                        <a href="#" class="nav-link" data-target="page-sql-editor">
                            <div class="nav-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <database />
                                    <path d="M12 12c-3 0-6-2-6-5s3-5 6-5 6 2 6 5-3 5-6 5z" />
                                    <path d="M12 12c3 0 6 2 6 5s-3 5-6 5-6-2-6-5" />
                                    <path d="M12 22c3 0 6-2 6-5" />
                                </svg></div>
                            <span>SQL Data</span>
                        </a>
                    </li>
                </ul>

                <div class="sidebar-footer">
                    <button id="logout-btn" class="logout-btn-micro">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                            <polyline points="16 17 21 12 16 7" />
                            <line x1="21" y1="12" x2="9" y2="12" />
                        </svg>
                        <span>ƒêƒÉng xu·∫•t</span>
                    </button>
                    <div class="version-tag">v3.1.0</div>
                </div>
            </nav>
        </aside>

        <div class="sidebar-overlay"></div>

        <main class="main-content">
            <!-- TOP BAR GLASS -->
            <header class="top-bar glass-header">
                <div class="top-bar-left">
                    <button id="menu-toggle-btn" class="icon-btn-ghost">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="3" y1="12" x2="21" y2="12"></line>
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <line x1="3" y1="18" x2="21" y2="18"></line>
                        </svg>
                    </button>
                    <div class="page-title-wrapper">
                        <h1 id="page-title">T·ªïng quan</h1>
                        <p id="page-description">S·ªë li·ªáu th·ªëng k√™ th·ªùi gian th·ª±c</p>
                    </div>
                </div>
                <!-- Controls right (Date picker moved here for better UX) -->
                <div class="top-bar-right">
                    <div class="date-picker-wrapper">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        <input type="date" id="admin-date-picker">
                    </div>
                </div>
            </header>

            <div class="content-wrapper">
                <!-- PAGE: T·ªîNG QUAN -->
                <div id="page-dashboard" class="page-content active">
                    <!-- Stats Cards Row -->
                    <div class="stats-row">
                        <div class="stat-card glass-card revenue-card">
                            <div class="stat-content">
                                <h3>Doanh thu</h3>
                                <p class="stat-value" id="total-revenue">0 <sup>ƒë</sup></p>
                                <span class="stat-trend positive">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                                        <polyline points="17 6 23 6 23 12"></polyline>
                                    </svg>
                                    H√¥m nay
                                </span>
                            </div>
                            <div class="stat-deco-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <line x1="12" x2="12" y1="1" y2="23" />
                                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
                                </svg>
                            </div>
                        </div>

                        <div class="stat-card glass-card vehicles-card">
                            <div class="stat-content">
                                <h3>L∆∞·ª£t xe</h3>
                                <p class="stat-value" id="total-vehicles">0</p>
                                <span class="stat-trend neutral">T·ªïng c·ªông</span>
                            </div>
                            <div class="stat-deco-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M14 16.5V14a2 2 0 0 0-2-2h-1a2 2 0 0 0-2 2v2.5" />
                                    <path d="M12 12V8" />
                                    <circle cx="12" cy="6" r="2" />
                                    <path
                                        d="M15 20a2 2 0 0 0 2-2V9.5a2.5 2.5 0 0 0-2.5-2.5h-5A2.5 2.5 0 0 0 7 9.5V18a2 2 0 0 0 2 2h6Z" />
                                </svg>
                            </div>
                        </div>

                        <div class="stat-card glass-card parking-card">
                            <div class="stat-content">
                                <h3>ƒêang g·ª≠i</h3>
                                <p class="stat-value" id="current-vehicles">0</p>
                                <span class="stat-trend highlight">Hi·ªán t·∫°i</span>
                            </div>
                            <div class="stat-deco-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path
                                        d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2" />
                                    <circle cx="7" cy="17" r="2" />
                                    <circle cx="17" cy="17" r="2" />
                                </svg>
                            </div>
                        </div>
                    </div>

                    <!-- Main Chart Area -->
                    <div class="dashboard-grid">
                        <div class="chart-panel glass-card full-width">
                            <div class="card-header borderless">
                                <h3>L∆∞u l∆∞·ª£ng xe theo gi·ªù</h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-container main-chart"><canvas id="traffic-chart"></canvas></div>
                            </div>
                        </div>

                        <div class="chart-panel glass-card">
                            <div class="card-header borderless">
                                <h3 id="revenue-chart-title">Doanh thu / B√£i</h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-container"><canvas id="revenue-chart"></canvas></div>
                            </div>
                        </div>
                        <div class="chart-panel glass-card">
                            <div class="card-header borderless">
                                <h3 id="vehicles-chart-title">L∆∞·ª£t xe / B√£i</h3>
                            </div>
                            <div class="card-body">
                                <div class="chart-container"><canvas id="vehicles-chart"></canvas></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PAGE: GIAO D·ªäCH -->
                <div id="page-transactions" class="page-content">
                    <div class="glass-card table-panel">
                        <div class="card-header">
                            <h3>Qu·∫£n l√Ω Giao d·ªãch</h3>
                            <div id="transaction-search-wrapper" class="modern-search">
                                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                </svg>
                                <input type="text" id="transaction-search-input" placeholder="T√¨m ki·∫øm bi·ªÉn s·ªë, ID...">
                                <button id="transaction-scan-qr-btn" class="icon-btn-small" title="Qu√©t QR">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <rect x="3" y="3" width="7" height="7"></rect>
                                        <rect x="14" y="3" width="7" height="7"></rect>
                                        <rect x="14" y="14" width="7" height="7"></rect>
                                        <rect x="3" y="14" width="7" height="7" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="table-wrapper custom-scrollbar">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Bi·ªÉn s·ªë</th>
                                        <th>Gi·ªù v√†o</th>
                                        <th>Gi·ªù ra</th>
                                        <th>Ph√≠</th>
                                        <th>PTTT</th>
                                        <th>B√£i ƒë·ªó</th>
                                        <th class="text-center">Tr·∫°ng th√°i</th>
                                        <th class="text-center">H√†nh ƒë·ªông</th>
                                    </tr>
                                </thead>
                                <tbody id="transaction-log-body"></tbody>
                            </table>
                        </div>
                        <div id="pagination-controls" class="modern-pagination"></div>
                    </div>
                </div>

                <!-- PAGE: QU·∫¢N L√ù V·ªä TR√ç -->
                <div id="page-locations" class="page-content">
                    <div class="locations-layout">
                        <div class="glass-card map-view">
                            <div class="card-header borderless">
                                <h3>B·∫£n ƒë·ªì B√£i ƒë·ªó</h3>
                            </div>
                            <div class="card-body flush">
                                <div id="map-container"></div>
                            </div>
                        </div>
                        <div class="glass-card list-view">
                            <div class="card-header">
                                <h3>Danh s√°ch B√£i</h3>
                                <button id="add-location-btn" class="btn-primary btn-sm btn-glow">+ Th√™m m·ªõi</button>
                            </div>
                            <div class="locations-grid" id="locations-grid">
                                <!-- JS will render location cards here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PAGE: AN NINH -->
                <div id="page-security" class="page-content">
                    <div class="security-grid">
                        <div class="glass-card alert-form-panel">
                            <div class="card-header">
                                <h3>üö® Ph√°t l·ªánh C·∫£nh b√°o</h3>
                            </div>
                            <div class="card-body">
                                <div class="form-group floating-label">
                                    <input type="text" id="security-alert-plate" required placeholder=" "
                                        style="text-transform: uppercase;">
                                    <label>Bi·ªÉn s·ªë xe</label>
                                </div>
                                <div class="form-group floating-label">
                                    <textarea id="security-alert-reason" required placeholder=" " rows="3"></textarea>
                                    <label>L√Ω do c·∫£nh b√°o</label>
                                </div>
                                <div class="quick-tags">
                                    <span class="tag default-reason-btn">Xe nghi v·∫•n</span>
                                    <span class="tag default-reason-btn">B√°o m·∫•t c·∫Øp</span>
                                    <span class="tag default-reason-btn">Y√™u c·∫ßu gi·ªØ l·∫°i</span>
                                </div>
                                <div id="alert-level-container" class="alert-options">
                                    <label class="radio-card">
                                        <input type="radio" name="alert-level" value="warning" checked>
                                        <div class="radio-content">
                                            <strong>C·∫£nh b√°o</strong>
                                            <small>Hi·ªÉn th·ªã th√¥ng b√°o khi xe v√†o</small>
                                        </div>
                                    </label>
                                    <label class="radio-card danger">
                                        <input type="radio" name="alert-level" value="block">
                                        <div class="radio-content">
                                            <strong>Ch·∫∑n xe</strong>
                                            <small>Kh√¥ng cho ph√©p xe ra kh·ªèi b√£i</small>
                                        </div>
                                    </label>
                                </div>
                                <div class="btn-group">
                                    <button id="send-security-alert-btn" class="action-button btn-danger btn-block">G·ª≠i
                                        C·∫£nh B√°o Ngay</button>
                                    <button id="remove-alert-btn" class="action-button btn-secondary btn-block">G·ª° C·∫£nh
                                        B√°o</button>
                                </div>
                            </div>
                        </div>
                        <div class="glass-card alert-list-panel">
                            <div class="card-header">
                                <h3>Danh s√°ch ƒëang theo d√µi</h3>
                            </div>
                            <div id="active-alerts-list" class="custom-scrollbar styled-list"></div>
                        </div>
                    </div>
                </div>



                <!-- PAGE: SQL -->
                <div id="page-sql-editor" class="page-content">
                    <div class="glass-card">
                        <div class="card-header">
                            <h3>SQL Editor (Advanced)</h3>
                        </div>
                        <div class="card-body">
                            <div class="sql-editor-warning">
                                <strong>‚ö†Ô∏è C·∫©n th·∫≠n:</strong> T√≠nh nƒÉng n√†y d√†nh cho nh√† ph√°t tri·ªÉn.
                            </div>
                            <textarea id="sql-query-input" class="code-editor"
                                placeholder="SELECT * FROM transactions..."></textarea>
                            <button id="execute-sql-btn" class="btn-danger btn-sm" style="margin-top: 1rem;">Run
                                Query</button>
                            <div id="sql-results-container" class="sql-output custom-scrollbar"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- MODALS (PREMIUM) -->
    <div id="transaction-modal" class="modal">
        <div class="modal-content glass-modal">
            <div class="modal-header">
                <h2 id="transaction-modal-title">Chi ti·∫øt Giao d·ªãch</h2>
                <button id="close-transaction-modal-btn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body custom-scrollbar">
                <form id="transaction-form" class="modern-form">
                    <input type="hidden" id="transaction-unique-id">
                    <div class="form-row">
                        <div class="form-group floating-label">
                            <input type="text" id="transaction-plate" required placeholder=" ">
                            <label>Bi·ªÉn s·ªë</label>
                        </div>
                        <div class="form-group floating-label">
                            <input type="number" id="transaction-fee" placeholder=" ">
                            <label>Ph√≠ (VNƒê)</label>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group"><label>Gi·ªù v√†o</label><input type="datetime-local"
                                id="transaction-entry-time"></div>
                        <div class="form-group"><label>Gi·ªù ra</label><input type="datetime-local"
                                id="transaction-exit-time"></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ph∆∞∆°ng th·ª©c</label>
                            <select id="transaction-payment-method">
                                <option value="">-- Ch·ªçn --</option>
                                <option value="Ti·ªÅn m·∫∑t">Ti·ªÅn m·∫∑t</option>
                                <option value="Chuy·ªÉn kho·∫£n QR">Chuy·ªÉn kho·∫£n QR</option>
                                <option value="Mi·ªÖn ph√≠">Mi·ªÖn ph√≠</option>
                                <option value="VIP">VIP</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Tr·∫°ng th√°i</label>
                            <select id="transaction-status">
                                <option value="ƒêang g·ª≠i">ƒêang g·ª≠i</option>
                                <option value="ƒê√£ r·ªùi b√£i">ƒê√£ r·ªùi b√£i</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group floating-label">
                        <textarea id="transaction-notes" rows="2" placeholder=" "></textarea>
                        <label>Ghi ch√∫</label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="delete-transaction-btn" class="btn-text-danger">X√≥a b·ªè</button>
                <div class="right-actions">
                    <button id="cancel-transaction-btn" class="btn-secondary">H·ªßy</button>
                    <button id="save-transaction-btn" class="btn-primary">L∆∞u thay ƒë·ªïi</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Location Modal & Scanner Modal (Keep simpler structure but improved classes) -->
    <div id="location-modal" class="modal">
        <div class="modal-content glass-modal">
            <div class="modal-header">
                <h2 id="location-modal-title">B√£i ƒë·ªó xe</h2><button id="close-location-modal-btn"
                    class="close-btn">&times;</button>
            </div>
            <div class="modal-body custom-scrollbar">
                <form id="location-form" class="modern-form">
                    <input type="hidden" id="location-id">
                    <div class="form-group floating-label"><input type="text" id="location-name" required
                            placeholder=" "><label>T√™n b√£i ƒë·ªó</label></div>
                    <div class="form-row">
                        <div class="form-group floating-label"><input type="number" step="any" id="location-lat"
                                required placeholder=" "><label>Vƒ© ƒë·ªô</label></div>
                        <div class="form-group floating-label"><input type="number" step="any" id="location-lng"
                                required placeholder=" "><label>Kinh ƒë·ªô</label></div>
                    </div>
                    <div class="form-group floating-label"><input type="text" id="location-address"
                            placeholder=" "><label>ƒê·ªãa ch·ªâ</label></div>

                    <div class="divider"><span>Th√¥ng tin b·ªï sung</span></div>

                    <div class="form-row">
                        <div class="form-group floating-label"><input type="number" id="location-capacity"
                                placeholder=" "><label>S·ª©c ch·ª©a</label></div>
                        <div class="form-group floating-label"><input type="text" id="location-hotline"
                                placeholder=" "><label>Hotline</label></div>
                    </div>
                    <div class="form-group floating-label"><input type="text" id="location-operating-hours"
                            placeholder=" "><label>Gi·ªù ho·∫°t ƒë·ªông</label></div>
                    <div class="form-group floating-label"><input type="text" id="location-event-name"
                            placeholder=" "><label>T√™n s·ª± ki·ªán</label></div>

                    <div class="divider"><span>C·∫•u h√¨nh ph√≠</span></div>

                    <div class="form-group">
                        <label>Lo·∫°i h√¨nh thu ph√≠</label>
                        <select id="location-fee-policy-type">
                            <option value="free">Mi·ªÖn ph√≠</option>
                            <option value="hourly">Theo gi·ªù</option>
                            <option value="per_entry">Theo l∆∞·ª£t</option>
                            <option value="daily">Theo ng√†y</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Th·ªùi ƒëi·ªÉm thu</label>
                        <select id="location-fee-collection-policy">
                            <option value="post_paid">Khi ra (M·∫∑c ƒë·ªãnh)</option>
                            <option value="pre_paid">Khi v√†o</option>
                        </select>
                    </div>
                    <div id="custom-fee-inputs-wrapper" class="fee-config-box">
                        <div class="fee-input-group" data-policy="hourly">
                            <div class="form-group floating-label"><input type="number" id="location-fee-hourly-day"
                                    placeholder=" "><label>Gi√° ban ng√†y</label></div>
                            <div class="form-group floating-label"><input type="number" id="location-fee-hourly-night"
                                    placeholder=" "><label>Gi√° ban ƒë√™m</label></div>
                        </div>
                        <div class="fee-input-group" data-policy="per_entry">
                            <div class="form-group floating-label"><input type="number" id="location-fee-per-entry"
                                    placeholder=" "><label>Gi√° m·ªói l∆∞·ª£t</label></div>
                        </div>
                        <div class="fee-input-group" data-policy="daily">
                            <div class="form-group floating-label"><input type="number" id="location-fee-daily"
                                    placeholder=" "><label>Gi√° m·ªói ng√†y</label></div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="delete-location-btn" class="btn-text-danger" style="display: none;">X√≥a b√£i ƒë·ªó</button>
                <div class="right-actions">
                    <button id="cancel-location-btn" class="btn-secondary">H·ªßy</button>
                    <button id="save-location-btn" class="btn-primary">L∆∞u c·∫•u h√¨nh</button>
                </div>
            </div>
        </div>
    </div>

    <!-- QR Scanner Modal -->
    <div id="admin-qr-scanner-modal" class="modal">
        <div class="modal-content glass-modal compact">
            <div class="modal-header">
                <h2>Qu√©t QR</h2><button id="close-admin-scanner-btn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body no-padding">
                <video id="admin-camera-feed"></video>
                <div class="scanner-overlay">
                    <div class="scanner-viewfinder"></div>
                </div>
                <div id="admin-scan-feedback" class="scanner-feedback">
                    <div class="checkmark-circle"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast-container"></div>
    <div id="fireworks-container"></div>

    <script src="admin.js"></script>

    <!-- STATUS NOTIFICATION MODAL -->
    <div id="status-modal" class="modal" style="z-index: 2000;">
        <div class="modal-content glass-modal status-modal-content">
            <div class="status-icon-container"></div>
            <h3 id="status-modal-title">Th√†nh c√¥ng!</h3>
            <p id="status-modal-message">Thao t√°c ƒë√£ ƒë∆∞·ª£c th·ª±c hi·ªán.</p>
            <button id="status-modal-btn" class="btn-primary">ƒê√≥ng</button>
        </div>
    </div>
</body>

</html>